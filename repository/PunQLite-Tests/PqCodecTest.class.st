"
Tests for PqCodec and PqUtf8Codec classes.
"
Class {
	#name : #PqCodecTest,
	#superclass : #TestCase,
	#category : #'PunQLite-Tests-Codec'
}

{ #category : #testing }
PqCodecTest >> testUtf8CodecDecodeByteArray [
	| codec decoded |

	codec := PqUtf8Codec new.
	decoded := codec decode: 'Hello' utf8Encoded.
	self assert: decoded equals: 'Hello'
]

{ #category : #testing }
PqCodecTest >> testUtf8CodecEncodeString [
	| codec encoded |

	codec := PqUtf8Codec new.
	encoded := codec encode: 'Hello'.
	self assert: encoded equals: 'Hello' utf8Encoded
]

{ #category : #testing }
PqCodecTest >> testUtf8CodecMultiByteCharacters [
	| codec japanese chinese emoji |

	codec := PqUtf8Codec new.

	japanese := 'ã“ã‚“ã«ã¡ã¯'.
	self assert: (codec decode: (codec encode: japanese)) equals: japanese.

	chinese := 'ä½ å¥½ä¸–ç•Œ'.
	self assert: (codec decode: (codec encode: chinese)) equals: chinese.

	emoji := 'ðŸ‘‹ðŸŒ'.
	self assert: (codec decode: (codec encode: emoji)) equals: emoji
]

{ #category : #testing }
PqCodecTest >> testUtf8CodecRoundtrip [
	| codec original |

	codec := PqUtf8Codec new.
	original := 'Hello, ä¸–ç•Œ! ðŸ‘‹'.
	self assert: (codec decode: (codec encode: original)) equals: original
]
